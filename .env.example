# ==========================================
# Telegram RAG Knowledge Base Configuration
# ==========================================
# Copy this file to .env and update with your settings

# ------------------------------------------
# Weaviate Vector Database
# ------------------------------------------
WEAVIATE_HOST=localhost
WEAVIATE_PORT=8080
WEAVIATE_SCHEME=http
# For Docker: use host.docker.internal if Weaviate is in Docker

# ------------------------------------------
# Embedding Provider Selection
# ------------------------------------------
# Choose one: ollama, openai, openrouter
EMBEDDING_PROVIDER=ollama

# ------------------------------------------
# Ollama Configuration (Local, Free)
# ------------------------------------------
OLLAMA_HOST=localhost
OLLAMA_PORT=11434
# Recommended models:
# - nomic-embed-text (fast, efficient)
# - mxbai-embed-large (better quality)
OLLAMA_EMBED_MODEL=nomic-embed-text
OLLAMA_GENERATION_MODEL=llama3.2

# ------------------------------------------
# OpenAI Configuration (Paid, High Quality)
# ------------------------------------------
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=
# Embedding models:
# - text-embedding-3-small (cheap, fast)
# - text-embedding-3-large (better quality)
OPENAI_EMBED_MODEL=text-embedding-3-small
OPENAI_GENERATION_MODEL=gpt-4-turbo-preview

# ------------------------------------------
# OpenRouter Configuration (Multiple Providers)
# ------------------------------------------
# Get API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=
# Format: provider/model
OPENROUTER_EMBED_MODEL=openai/text-embedding-3-small
OPENROUTER_GENERATION_MODEL=anthropic/claude-3-haiku

# ------------------------------------------
# Application Settings
# ------------------------------------------
# Number of documents to process at once
BATCH_SIZE=100

# RAG Enhancement: Use contextual information injection (49% better retrieval)
# Set to true for production, false for faster processing
USE_CONTEXTUAL_CONTENT=false

# Name of the Weaviate collection
COLLECTION_NAME=TelegramMessages

# Thread detection settings
THREAD_TIME_WINDOW_MINUTES=5
THREAD_MIN_MESSAGES=1
THREAD_MAX_MESSAGES=50

# Search settings (0=keyword only, 1=vector only)
SEARCH_ALPHA=0.75
SEARCH_LIMIT=5

# ------------------------------------------
# RAG API Settings
# ------------------------------------------
# API key for authentication - REQUIRED: generate a secure random key
# Example: openssl rand -hex 32
API_KEY=
API_PORT=8000
KNOWLEDGE_ID=rag-knowledge-base

# Legacy compatibility (optional)
DIFY_API_KEY=

# ------------------------------------------
# Logging and Monitoring
# ------------------------------------------
LOG_LEVEL=INFO
LOG_FILE=telegram_rag.log
ENABLE_METRICS=false

# ------------------------------------------
# Performance Tuning
# ------------------------------------------
# Max workers for parallel processing
MAX_WORKERS=4

# Connection timeouts (seconds)
WEAVIATE_TIMEOUT=30
EMBEDDING_TIMEOUT=60

# Cache settings
ENABLE_CACHE=true
CACHE_TTL_SECONDS=3600